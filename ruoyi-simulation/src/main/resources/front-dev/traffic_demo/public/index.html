<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <script type="text/javascript">
    window._AMapSecurityConfig = {
      securityJsCode: "abeb1094acf058e343c316faf2ce00cd",
    };
  </script>
  <script type="importmap">
        {
          "imports": {
            "three": "https://unpkg.com/three@0.158.0/build/three.module.js",
            "three/addons/": "https://unpkg.com/three@0.158.0/examples/jsm/"
          }
        }
      </script>
  <script>
    function updateAnimation(value, key = "animationIndex") {
      localStorage.setItem(key, value);
      // Dispatch a custom event for changes made in the same window/tab
      window.dispatchEvent(new CustomEvent('animationIndexChanged', { detail: { "animationIndex": value } }));
    }
    function updateLight(lightNumber, value) {
      const key = `light${lightNumber}`; // Dynamically create the key based on lightNumber
      localStorage.setItem(key, value);

      // Dispatch a custom event for changes made in the same window/tab
      const lightName = `light${lightNumber}`; // Ensure the lightName is correctly formatted
      window.dispatchEvent(new CustomEvent('lightTimerChanged', { detail: { [lightName]: value } }));
    }
    function updateTrafficInfo(TrafficInfoName, value) {
      const key = `${TrafficInfoName}`;
      localStorage.setItem(key, value);

      // Dispatch a custom event for changes made in the same window/tab
      const TrafficInfo = `${TrafficInfoName}`;
      window.dispatchEvent(new CustomEvent('TrafficInfoChanged', { detail: { [TrafficInfo]: value } }));
    }

  </script>
  <title>智慧交通大模型</title>
</head>

<body>

  <div id="videoParentElement">
  </div>
  <div id="root">
  </div>
  <video id="videoElement" autoplay muted src="./start-view.mp4"></video>
  <script type="text/javascript" src="../statics/record.js"></script>
  <script type="text/javascript" src="../statics/webRtcPlayer.js"></script>
  <script type="text/javascript" src="../statics/loadingPixStream.js"></script>
  <script type="text/javascript" src="../src/main.js"></script>
</body>

</html>